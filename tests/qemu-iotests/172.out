QA output created by 172
Formatting 'TEST_DIR/t.IMGFMT', fmt=IMGFMT size=737280
Formatting 'TEST_DIR/t.IMGFMT.2', fmt=IMGFMT size=737280
Formatting 'TEST_DIR/t.IMGFMT.3', fmt=IMGFMT size=737280


=== Default ===

Testing:

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "floppy0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "288"


=== Using -fda/-fdb options ===

Testing: -fda TEST_DIR/t.qcow2

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "floppy0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -fdb TEST_DIR/t.qcow2

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "floppy1"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "floppy0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "288"

Testing: -fda TEST_DIR/t.qcow2 -fdb TEST_DIR/t.qcow2.2

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "floppy1"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "floppy0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"


=== Using -drive options ===

Testing: -drive if=floppy,file=TEST_DIR/t.qcow2

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "floppy0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -drive if=floppy,file=TEST_DIR/t.qcow2,index=1

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "floppy1"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "floppy0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "288"

Testing: -drive if=floppy,file=TEST_DIR/t.qcow2 -drive if=floppy,file=TEST_DIR/t.qcow2.2,index=1

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "floppy1"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "floppy0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"


=== Using -drive if=none and -global ===

Testing: -drive if=none,file=TEST_DIR/t.qcow2 -global isa-fdc.driveA=none0

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -drive if=none,file=TEST_DIR/t.qcow2 -global isa-fdc.driveB=none0

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -drive if=none,file=TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -global isa-fdc.driveA=none0 -global isa-fdc.driveB=none1

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "none1"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"


=== Using -drive if=none and -device ===

Testing: -drive if=none,file=TEST_DIR/t.qcow2 -device floppy,drive=none0

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -drive if=none,file=TEST_DIR/t.qcow2 -device floppy,drive=none0,unit=1

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -drive if=none,file=TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -device floppy,drive=none0 -device floppy,drive=none1,unit=1

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "none1"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"


=== Mixing -fdX and -global ===

Testing: -fda TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -global isa-fdc.driveB=none0

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "floppy0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -fdb TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -global isa-fdc.driveA=none0

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "floppy1"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -fda TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -global isa-fdc.driveA=none0

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "floppy0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -fdb TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -global isa-fdc.driveB=none0

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "floppy1"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"


=== Mixing -fdX and -device ===

Testing: -fda TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -device floppy,drive=none0

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "floppy0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -fda TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -device floppy,drive=none0,unit=1

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "floppy0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -fdb TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -device floppy,drive=none0

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "floppy1"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -fdb TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -device floppy,drive=none0,unit=0

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "floppy1"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -fda TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -device floppy,drive=none0,unit=0
QEMU_PROG: -device floppy,drive=none0,unit=0: Floppy unit 0 is in use

Testing: -fdb TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -device floppy,drive=none0,unit=1
QEMU_PROG: -device floppy,drive=none0,unit=1: Floppy unit 1 is in use


=== Mixing -drive and -device ===

Testing: -drive if=floppy,file=TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -device floppy,drive=none0

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "floppy0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -drive if=floppy,file=TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -device floppy,drive=none0,unit=1

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "floppy0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -drive if=floppy,file=TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -device floppy,drive=none0,unit=0
QEMU_PROG: -device floppy,drive=none0,unit=0: Floppy unit 0 is in use


=== Mixing -global and -device ===

Testing: -drive if=none,file=TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -global isa-fdc.driveA=none0 -device floppy,drive=none1

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "none1"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -drive if=none,file=TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -global isa-fdc.driveA=none0 -device floppy,drive=none1,unit=1

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "none1"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -drive if=none,file=TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -global isa-fdc.driveB=none0 -device floppy,drive=none1

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "none1"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -drive if=none,file=TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -global isa-fdc.driveB=none0 -device floppy,drive=none1,unit=0

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "none1"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"
              dev: floppy, id ""
                unit = 1 (0x1)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -drive if=none,file=TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -global isa-fdc.driveA=none0 -device floppy,drive=none1,unit=0
QEMU_PROG: -device floppy,drive=none1,unit=0: Floppy unit 0 is in use

Testing: -drive if=none,file=TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -global isa-fdc.driveB=none0 -device floppy,drive=none1,unit=1
QEMU_PROG: -device floppy,drive=none1,unit=1: Floppy unit 1 is in use


=== Too many floppy drives ===

Testing: -drive if=floppy,file=TEST_DIR/t.qcow2 -drive if=none,file=TEST_DIR/t.qcow2.2 -drive if=none,file=TEST_DIR/t.qcow2.3 -global isa-fdc.driveB=none0 -device floppy,drive=none1
QEMU_PROG: -device floppy,drive=none1: Can't create floppy unit 2, bus supports only 2 units


=== Creating an empty drive with anonymous BB ===

Testing: -device floppy

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = ""
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "288"

Testing: -device floppy,drive-type=120

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = ""
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "120"

Testing: -device floppy,drive-type=144

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = ""
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -device floppy,drive-type=288

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = ""
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "288"


=== Try passing different drive size with image ===

Testing: -drive if=none,file=TEST_DIR/t.qcow2 -device floppy,drive=none0,drive-type=120

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "120"

Testing: -drive if=none,file=TEST_DIR/t.qcow2 -device floppy,drive=none0,drive-type=288

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "288"


=== Try passing different block sizes ===

Testing: -drive if=none,file=TEST_DIR/t.qcow2 -device floppy,drive=none0,logical_block_size=512

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -drive if=none,file=TEST_DIR/t.qcow2 -device floppy,drive=none0,physical_block_size=512

          dev: isa-fdc, id ""
            iobase = 1008 (0x3f0)
            irq = 6 (0x6)
            dma = 2 (0x2)
            driveA = ""
            driveB = ""
            check_media_rate = true
            fdtypeA = "auto"
            fdtypeB = "auto"
            fallback = "288"
            isa irq 6
            bus: floppy-bus.0
              type floppy-bus
              dev: floppy, id ""
                unit = 0 (0x0)
                drive = "none0"
                logical_block_size = 512 (0x200)
                physical_block_size = 512 (0x200)
                min_io_size = 0 (0x0)
                opt_io_size = 0 (0x0)
                discard_granularity = 4294967295 (0xffffffff)
                write-cache = "auto"
                share-rw = false
                drive-type = "144"

Testing: -drive if=none,file=TEST_DIR/t.qcow2 -device floppy,drive=none0,logical_block_size=4096
QEMU_PROG: -device floppy,drive=none0,logical_block_size=4096: Physical and logical block size must be 512 for floppy

Testing: -drive if=none,file=TEST_DIR/t.qcow2 -device floppy,drive=none0,physical_block_size=1024
QEMU_PROG: -device floppy,drive=none0,physical_block_size=1024: Physical and logical block size must be 512 for floppy


=== Writethrough caching ===
    Cache mode:       writeback
    Cache mode:       writeback
    Cache mode:       writethrough
*** done
